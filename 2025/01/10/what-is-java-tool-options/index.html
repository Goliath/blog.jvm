<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Bitecode blog"><meta property="og:type" content="article"><meta property="og:image" content="https://bitecode.blog//img/bg_water.webp"><meta property="twitter:image" content="https://bitecode.blog//img/bg_water.webp"><meta name=title content="What is JAVA_TOOL_OPTIONS environment variable?"><meta property="og:title" content="What is JAVA_TOOL_OPTIONS environment variable?"><meta property="twitter:title" content="What is JAVA_TOOL_OPTIONS environment variable?"><meta name=description content="Injecting java program arguments utilizing JAVA_TOOL_OPTIONS"><meta property="og:description" content="Injecting java program arguments utilizing JAVA_TOOL_OPTIONS"><meta property="twitter:description" content="Injecting java program arguments utilizing JAVA_TOOL_OPTIONS"><meta property="twitter:card" content="summary"><meta name=keyword content="JVM, java, openjdk, jdk, performance, profiling, debugging, speed, bytecode, software craftsmanship, design patterns, java speed, security"><link rel="shortcut icon" href=/img/favicon.ico><title>What is JAVA_TOOL_OPTIONS environment variable? | Marcin Szlagor's blog on JVM technologies</title><link rel=canonical href=/2025/01/10/what-is-java-tool-options/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link rel=stylesheet href=/css/font-awesome.all.min.css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/hux-blog.min.js></script><script src=/js/lazysizes.min.js></script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-H2HHPLTEYB"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H2HHPLTEYB")}</script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=/>Bitecode blog</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/groovy/>groovy</a></li><li><a href=/categories/jvm/>jvm</a></li><li><a href=/categories/performance/>performance</a></li><li><a href=/categories/security/>security</a></li><li><a href=/categories/tips/>tips</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><header class=intro-header style=background-image:url(/img/bg_water.webp)><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=site-heading><h1>Bitecode blog</h1><span class=subheading>Knowledge for JVM-hungry people</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-1
col-md-8 col-md-offset-1
col-sm-12
col-xs-12
post-container"><h2 id=introduction>Introduction</h2><p>Everyone knows what JAVA_OPTS is, but have you ever heard about <code>JAVA_TOOL_OPTIONS</code>?</p><p>Over the years, the way we run JVM has changed. With demand for running the aps in containers, <code>JAVA_TOOL_OPTIONS</code> environment variable might be handy. In this short article I will try to explain the reasons for using it.</p><h2 id=what-is-java_tool_options-environment-variable-and-how-it-is-different-to-java_opts>What is JAVA_TOOL_OPTIONS environment variable and how it is different to JAVA_OPTS?</h2><p>After using Apache Tomcat for a longer time, one might have an illusion that JAVA_OPTS is an environment variable and is picked by JVM when the app starts.
In fact, it is not. It is catalina sh/bat starter that passes JAVA_OPTS content to the start up command line.</p><p>Contrary <code>JAVA_TOOL_OPTIONS</code> once setup is read by the JVM (in JNI_CreateJavaVM) and prepended to other options supplied in execution chain.</p><p>By java documentation <a href=https://docs.oracle.com/en/java/javase/17/troubleshoot/environment-variables-and-system-properties.html#GUID-A91E7E21-2E91-48C4-89A4-836A7C0EE93B>JAVA_TOOL_OPTIONS</a></p><blockquote><p>This environment variable allows you to specify the initialization of tools, specifically the launching of native or Java programming language agents using the -agentlib or -javaagent options.</p></blockquote><blockquote><p>This often happens with applications that use embedded VMs (meaning they use the Java Native Interface (JNI) Invocation API to start the VM), or where the startup is deeply nested in scripts. In these environments the JAVA_TOOL_OPTIONS environment variable can be useful to augment a command line.</p></blockquote><p>In short, <code>JAVA_TOOL_OPTIONS</code> is a special environment variable which when set is used as if we write it&rsquo;s content in JVM args.</p><h2 id=real-life-examples>Real life examples</h2><p>There are scenarios when you would like to pass an argument to java app, but you can&rsquo;t modify execution params.
This can be due to the complexity of how the command line is generated, or sometimes JVM is executed by third party app, and we can&rsquo;t adjust command line as it&rsquo;s hardcoded.
In those scenarios special <code>JAVA_TOOL_OPTIONS</code> environment variable shines.</p><p>Say you want to provide different memory configurations for different environments, but you don&rsquo;t want to modify Dockerfile (and you are not using percentage settings).
Normally you would modify the existing ENTRYPOINT in Dockerfile like below, e.g:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#ff79c6>CMD</span> [<span style=color:#f1fa8c>&#34;java&#34;</span>, <span style=color:#f1fa8c>&#34;-Xmx1G&#34;</span>, <span style=color:#f1fa8c>&#34;-jar&#34;</span>, <span style=color:#f1fa8c>&#34;app.jar&#34;</span>]
</span></span></code></pre></div><p>but what if you want to keep Dockerfile intact.</p><p>You can take advantage of using <code>JAVA_TOOL_OPTIONS</code> and specified the necessary params there:</p><pre><code>`export JAVA_TOOL_OPTIONS=&quot;-Xmx1G&quot;`
</code></pre><p>Heap can be configured differently for specific environment:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>      ...
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>containers</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ff79c6>name</span>: java-app
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>image</span>: your-java-app-image:latest
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>env</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ff79c6>name</span>: JAVA_TOOL_OPTIONS
</span></span><span style=display:flex><span>              <span style=color:#ff79c6>value</span>: <span style=color:#f1fa8c>&#34;-Xmx1G&#34;</span>
</span></span><span style=display:flex><span>      ...
</span></span></code></pre></div><p>Using <code>JAVA_TOOL_OPTIONS</code> gives much finer control plus allowed to not overcomplicate the existing Dockerfile:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#ff79c6>CMD</span> [<span style=color:#f1fa8c>&#34;java&#34;</span>, <span style=color:#f1fa8c>&#34;-jar&#34;</span>, <span style=color:#f1fa8c>&#34;app.jar&#34;</span>]
</span></span></code></pre></div><h2 id=summary>Summary</h2><p><code>JAVA_TOOL_OPTIONS</code> enables you to inject JVM arguments without modifying the application&rsquo;s command line. This is particularly useful for complex or embedded environments.</p><div id=disqus-comment></div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//bitecode-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="col-lg-3 col-lg-offset-0
col-md-3 col-md-offset-0
col-sm-12
col-xs-12
sidebar-container"><section class="visible-md visible-lg"><div class=short-about><a href=/about><img src=/img/marcin2024.png alt=avatar style=cursor:pointer></a><p>Senior Software Engineer with a passion for JVM technologies.</p><ul class=list-inline><li><a href=mailto:marcin.szlagor@codeappeal.com><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i>
<i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/Goliath><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/marcinszlagor/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul></div></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:marcin.szlagor@codeappeal.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/Goliath><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/marcinszlagor/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title="Bitecode blog"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Bitecode blog 2025<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){n=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),t=$(this).text(),i=$('<a href="'+o+'" rel="nofollow" title="'+t+'">'+t+"</a>"),s=$('<li class="'+n+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>